window.__require=function e(t,n,o){function i(c,s){if(!n[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){return i(t[c][1][e]||e)},u,u.exports,e,t,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({CharPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1723dclvl1MEL302M1EKrUY","CharPanel"),function(){var e;e=function(){function e(){}return e.prototype._reset=function(){return this._lastPos=null,this._dir=null,this._isSelect=!1,this._passCount=0},e.prototype.init=function(e,t,n,o){var i;return this._char=n,i=cc.instantiate(t),e.addChild(i),i.setPosition(o),this._charNode=i,this._setChar()},e.prototype.getPosition=function(){return this._charNode.getPosition()},e.prototype.resetData=function(){return this._reset()},e.prototype._setChar=function(){return cc.find("letter",this._charNode).getComponent(cc.Label).string=this._char},e.prototype.getChar=function(){return this._char},e.prototype.getCharNode=function(){return this._charNode},e.prototype.getCharNodeRect=function(){var e;return e=this._charNode.getBoundingBox(),new cc.Rect(e.x,e.y,e.width,e.height)},e.prototype.changeColor=function(e){return cc.find("bg",this._charNode).color=e},e.prototype.runAction=function(e){return this._charNode.runAction(e)},e.prototype._getDir=function(e,t){var n;return n=t.sub(e).normalize().negSelf(),Math.abs(n.x)>Math.abs(n.y)?n.x>0?"right":"left":0===n.y?void 0:n.y>0?"up":"down"},e.prototype.trySelect=function(e){return!!this.getCharNodeRect().contains(e)&&(this.changeColor(cc.Color.GREEN),this._lastPos=e,this._isSelect=!0,!0)},e}(),t.exports={create:function(t,n,o,i){var r;return(r=new e).init(t,n,o,i),r}}}.call(this),cc._RF.pop()},{}],EventNames:[function(e,t,n){"use strict";cc._RF.push(t,"29144VOdc9K8pQth4oBIBqf","EventNames"),function(){var e;e={GAME_START:"game.start",GAME_GET_LEVEL:"game.get.level",GAME_NEXT_LEVEL:"game.next.level",GAME_FINISH:"game.finish",GAME_SPELL_WORD:"game.spell.word",GAME_GET_REVERSE_WORD:"game.get.reverse.word"},t.exports=e}.call(this),cc._RF.pop()},{}],GameDialog:[function(e,t,n){"use strict";cc._RF.push(t,"71479Vu999JaI/3x1c26eWd","GameDialog"),function(){var t,n,o,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=e("../common/Utils"),n=e("../common/EventNames"),t=e("./CharPanel"),cc.Class({extends:cc.Component,properties:{m_letter_prefab:cc.Prefab,m_blank_prefab:cc.Prefab,m_game_node:cc.Node,m_blank_node:cc.Node},onLoad:function(){this._charNodeTable=[],this._selectDeskItemTable=[],this._blankPositionMap={},this._initDesk(),this._wordsTable=this._getWordsTable(),this._initWordsNode(),this._addTouchEvent(),this._initBlank(),this._updateDeskStatus()},_updateDeskStatus:function(){return this._tryDownDeskItemForeach(),this.scheduleOnce(function(e){return function(){return e._tryMoveToRightForEach()}}(this),.2)},_getCoordinate:function(e){return{row:Math.floor(e/9)+1,col:e%9}},_getIndexByCoordinate:function(e,t){return 9*(e-1)+t},_isDeskItemIsNull:function(e){return null==this._deskItemTable[e].item},_getDownIndex:function(e){var t,n;if(n=-1,(t=this._getCoordinate(e)).row-1<0)return n;for(;t.row-1>0&&(e=this._getIndexByCoordinate(t.row-1,t.col),null==this._deskItemTable[e].item);)n=e,t=this._getCoordinate(e);return n},_getRightIndex:function(e){var t,n;if(n=-1,(t=this._getCoordinate(e)).col+1>=9)return n;for(;t.col+1<9&&(e=this._getIndexByCoordinate(t.row,t.col+1),null==this._deskItemTable[e].item);)n=e,t=this._getCoordinate(e);return n},_exchangeDeskItem:function(e,t){var n,o,i;return n=this._deskItemTable[e],i=this._deskItemTable[t],n.item.runAction(cc.place(i.position)),(o={}).item=n.item,n.item=i.item,i.item=o.item},_tryDownDeskItemForeach:function(){var e,t,n,o,i;for(n=t=0,o=(i=this._deskItemTable).length;t<o;n=++t)null!=i[n].item&&-1!==(e=this._getDownIndex(n))&&!1!==this._isDeskItemIsNull(e)&&this._exchangeDeskItem(n,e)},_tryMoveToRightForEach:function(){var e,t,n,o,i,r,c,s,a;for(i=0,r=e=0,9;e<9;r=++e)for(a=n=0,o=(c=[8,17,26,35,44,53,62,71,80]).length;n<o;a=++n)if(t=c[a],t-=r,null!=this._deskItemTable[t].item)if(0===a){if(-1===(s=this._getRightIndex(t)))continue;if(!1===this._isDeskItemIsNull(s))continue;i=s-t,this._exchangeDeskItem(t,s)}else this._exchangeDeskItem(t,i+t)},_getPositionByCoordinate:function(e,t){var n,o;return n=63*t,o=63*e,cc.v2(n,o)},_createCharNode:function(e,n){var o;return o=t.create(this.m_game_node,this.m_letter_prefab,n,e.position),e.item=o},_initDesk:function(){var e,t,n,o,i,r;for(this._deskItemTable=[],i=e=0,9;e<9;i=++e)for(r=t=0,o=9;0<=o?t<o:t>o;r=0<=o?++t:--t)n=this._getPositionByCoordinate(i,r),this._deskItemTable.push({position:n})},_getWordsTable:function(){var e;return e=[],o.triggerEvent(n.GAME_GET_LEVEL,function(t){return e=t}),e},_initBlank:function(){var e,t,n,o,i,r,c,s,a,l,u,h;for(l=t=0,i=(s=this._wordsTable).length;t<i;l=++t){for(u=[],n=o=0,r=(a=s[l]).length;o<r;n=++o)a[n],e=cc.instantiate(this.m_blank_prefab),this.m_blank_node.addChild(e),this._setCharNodePosition(e,l,n),h=this.m_blank_node.convertToWorldSpaceAR(e.getPosition()),c=this.m_game_node.convertToNodeSpaceAR(h),u.push(c);this._blankPositionMap[a]=u}},_findPositionTableInDesk:function(e){var t,n,i,r,c,s,a,l,u,h,_,d,m,f,g,p;for(console.log("length :"+e),h=[],t=0,o.randomInt(1,10)<=5&&(t=1),u=i=0,9;i<9;u=++i)for(g=c=0,l=(_=[8,17,26,35,44,53,62,71,80]).length;c<l;g=++c)if(r=_[g]-u,0===t){if(null!=this._deskItemTable[r].item)continue;if(-1===(f=this._getRightIndex(r)))continue;if(f-r>=e){for(u=s=0,d=e;0<=d?s<d:s>d;u=0<=d?++s:--s)p=r+u,this._deskItemTable[p].item=!0,h.push(p);return h}}else{if(null!=this._deskItemTable[r].item)continue;if(-1===(n=this._getDownIndex(r)))continue;if((r-n)/9>=e-1){for(u=a=0,m=e;0<=m?a<m:a>m;u=0<=m?++a:--a)p=n+9*u,this._deskItemTable[p].item=!0,h.push(p);return h}}},_dumpDeskItem:function(e){var t,n,o,i,r,c,s;for(n=0,o=0,i=(r=this._deskItemTable).length;o<i;o++){if(null!=(t=r[o]).item&&e){n++;break}e||console.log("--------------item:"+JSON.stringify(null!=(c=t.item)?c.getPosition():void 0)+", char:"+(null!=(s=t.item)?s.getChar():void 0)+"------------")}return n},_initWordsNode:function(){var e,t,n,i,r,c,s,a,l,u;for(u=t=0,r=(a=this._wordsTable).length;t<r;u=++t)if(l=a[u],null!=(s=this._findPositionTableInDesk(l.length)))for(o.randomInt(0,10)<5&&(s=o.reverseTable(s)),n=i=0,c=l.length;i<c;n=++i)e=l[n],this._createCharNode(this._deskItemTable[s[n]],e)},_setCharNodePosition:function(e,t,n){var o,i,r;return i=100+63*n,r=63*t+50,o=cc.v2(i,r),e.setPosition(o)},_getChar:function(e){return e?cc.find("letter",e).getComponent(cc.Label).string:""},_addCharNodeScaleAni:function(e,t){var n;return n=cc.scaleTo(.1,t),e.runAction(n)},_checkIsOnChar:function(e){var t,n,o,r;for(this._isPlayAnim=!1,n=0,o=(r=this._deskItemTable).length;n<o;n++)null!=(t=r[n]).item&&(!t.item.trySelect(e)||i.call(this._selectDeskItemTable,t)>=0||this._selectDeskItemTable.push(t));this._isPlayAnim=!0},_dealCharString:function(){var e,t,r,c,s,a,l,u,h,_,d,m;for(t=[],c=0,l=(_=this._selectDeskItemTable).length;c<l;c++)e=(r=_[c]).item.getChar(),t.push(e);if(t=t.join(""),i.call(this._wordsTable,t)>=0)for(h=this._blankPositionMap[t],s=a=0,u=(d=this._selectDeskItemTable).length;a<u;s=++a)m=(r=d[s]).item,this._flyToTarget(m,h[s]),r.item=void 0;return this.scheduleOnce(function(e){return function(){if(e._updateDeskStatus(),0===e._dumpDeskItem(!0))return o.triggerEvent(n.GAME_FINISH)}}(this),.2),t},_flyToTarget:function(e,t){var n,o,i;return n=cc.moveTo(.5,t),o=cc.scaleTo(.5,.66),i=cc.spawn(n,o),e.runAction(i)},_resetAllCharNode:function(){var e,t,n,o,i;for(i=[],t=0,n=(o=this._deskItemTable).length;t<n;t++)null!=(e=o[t]).item&&i.push(e.item.resetData());return i},_onTouchEnd:function(){var e,t,n,o;for(this._resetAllCharNode(),this._dealCharString(),t=0,n=(o=this._selectDeskItemTable).length;t<n;t++)null!=(e=o[t]).item&&e.item.changeColor(cc.Color.WHITE);this._selectDeskItemTable=[]},_addTouchEvent:function(){return this.m_game_node.on(cc.Node.EventType.TOUCH_START,function(e){return function(t){var n;return n=e.m_game_node.convertToNodeSpaceAR(t.getLocation()),e._checkIsOnChar(n)}}(this)),this.m_game_node.on(cc.Node.EventType.TOUCH_MOVE,function(e){return function(t){var n;return n=e.m_game_node.convertToNodeSpaceAR(t.getLocation()),null==e._lastPos&&(e._lastPos=n),n.sub(e._lastPos).mag(),e._lastPos=n,e._checkIsOnChar(n)}}(this)),this.m_game_node.on(cc.Node.EventType.TOUCH_END,function(e){return function(t){return e.m_game_node.convertToNodeSpaceAR(t.getLocation()),e._onTouchEnd()}}(this)),this.m_game_node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){return function(t){return e.m_game_node.convertToNodeSpaceAR(t.getLocation()),e._onTouchEnd()}}(this))}})}.call(this),cc._RF.pop()},{"../common/EventNames":"EventNames","../common/Utils":"Utils","./CharPanel":"CharPanel"}],GameLogic:[function(e,t,n){"use strict";cc._RF.push(t,"0d8bc0pe0pATbUHPVeWQuz3","GameLogic"),function(){var t,n,o,i;o=e("../common/Utils"),t=e("../common/EventNames"),i=e("../config/wordConfig"),n=i.wordTable,cc.Class({extends:cc.Component,properties:{},onLoad:function(){return cc.game.addPersistRootNode(this.node),this._registerEvent(),this._level=0,this._currentLevelWordsTable=[],this._allWordTable=null,cc.loader.loadRes("wordsTable.txt",function(e){return function(t,n){return e._allWordTable=n.toString()}}(this))},_registerEvent:function(){return o.bindEvent(t.GAME_START,function(e){return function(){return e._level=0,cc.director.loadScene("GameDialog")}}(this)),o.bindEvent(t.GAME_GET_LEVEL,function(e){return function(t){return t(e._getLevelWords())}}(this)),o.bindEvent(t.GAME_NEXT_LEVEL,function(e){return function(){return e._level++,e._level>n.length-1?cc.director.loadScene("WelcomeDialog"):cc.director.loadScene("GameDialog")}}(this)),o.bindEvent(t.GAME_FINISH,function(){return cc.director.loadScene("LevelClearDialog")})},_getWordByNum:function(e){var t,n;return t=new RegExp(e+',"([^"]*)"'),null==(n=this._allWordTable.match(t))?null:n.length>0?n=n[1]:null},_getLevelWords:function(){var e,t,n;for(n=[];n.length<22;)e=o.randomInt(1,13e3),null!=(t=this._getWordByNum(e))&&n.push(t);return n},_getLevelWordsOld:function(){var e,t,i;for(e=n[this._level],t=[];e.length>0;)i=o.randomInt(0,e.length-1),t.push(e[i]),e.splice(i,1);return t}})}.call(this),cc._RF.pop()},{"../common/EventNames":"EventNames","../common/Utils":"Utils","../config/wordConfig":"wordConfig"}],LevelClearDialog:[function(e,t,n){"use strict";cc._RF.push(t,"c2517xfISlGL63GQ5GiWVN8","LevelClearDialog"),function(){var t,n;n=e("../common/Utils"),t=e("../common/EventNames"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onNextLevel:function(){return n.triggerEvent(t.GAME_NEXT_LEVEL)}})}.call(this),cc._RF.pop()},{"../common/EventNames":"EventNames","../common/Utils":"Utils"}],RecordLogic:[function(e,t,n){"use strict";cc._RF.push(t,"11266MRE8pEPJi2ITrrVcUF","RecordLogic"),function(){cc.Class({extends:cc.Component,properties:{},onLoad:function(){return cc.game.addPersistRootNode(this.node)},setData:function(e){return this._data=e},getData:function(){return this._data}})}.call(this),cc._RF.pop()},{}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"6c7e8GM20xF8YJ8Zz1qGVgq","Utils"),function(){var e;e={bindEvent:function(e,t){return cc.director.getScene().getChildByName("LogicNode").on(e,t)},triggerEvent:function(e,t){return cc.director.getScene().getChildByName("LogicNode").emit(e,t)},getDataFromNode:function(){return cc.director.getScene().getChildByName("RecordNode").getComponent("Record").getData()},setDataOnNode:function(e){return cc.director.getScene().getChildByName("RecordNode").getComponent("Record").setData(e)},formatNum:function(e){return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},setItem:function(e,t){return cc.sys.localStorage.setItem(e,JSON.stringify(t))},getItem:function(e){try{return JSON.parse(cc.sys.localStorage.getItem(e))}catch(e){}},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},reverseTable:function(e){var t,n,o;for(o=[],t=e.length-1;t>=0;t+=-1)n=e[t],o.push(n);return o}},t.exports=e}.call(this),cc._RF.pop()},{}],WelcomdDialog:[function(e,t,n){"use strict";cc._RF.push(t,"4dd36K7Fb9OpLeMXJeVg7Hy","WelcomdDialog"),function(){var t,n;n=e("../common/Utils"),t=e("../common/EventNames"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onBegin:function(){return n.triggerEvent(t.GAME_START)}})}.call(this),cc._RF.pop()},{"../common/EventNames":"EventNames","../common/Utils":"Utils"}],wordConfig:[function(e,t,n){"use strict";cc._RF.push(t,"0a7a0ZCsV5I8pw/iESfFGLg","wordConfig"),function(){t.exports={wordTable:[["\u505a\u4e00\u5929\u548c\u5c1a\u649e\u4e00\u5929\u949f","\u4e0d\u5403\u7f8a\u8089\u7a7a\u60f9\u4e00\u8eab\u81bb","\u642c\u8d77\u77f3\u5934\u6253\u81ea\u5df1\u7684\u811a","\u4e00\u5c3a\u6c34\u7ffb\u817e\u505a\u767e\u4e08\u6ce2","\u65e0\u4ef7\u4e4b\u5b9d","\u4e0d\u77e5\u6240\u63aa","\u4ead\u4ead\u7389\u7acb","\u4e1c\u5f20\u897f\u671b","\u4e13\u5fc3\u81f4\u5fd7","\u9b42\u7275\u68a6\u8426","\u4e00\u7b79\u83ab\u5c55","\u82e5\u9690\u82e5\u73b0","\u54ed\u7b11\u4e0d\u5f97","\u76ee\u4e0d\u6687\u63a5","\u72ec\u5360\u9ccc\u5934","\u95fb\u540d\u9050\u8fe9","\u9707\u8033\u6b32\u804b","\u805a\u7cbe\u4f1a\u795e","\u9996\u5c48\u4e00\u6307","\u5f97\u610f\u6d0b\u6d0b","\u751f\u673a\u52c3\u52c3","\u5168\u795e\u8d2f\u6ce8","\u68a6\u5bd0\u4ee5\u6c42","\u76ee\u77aa\u53e3\u5446","\u5999\u4e0d\u53ef\u8a00","\u5927\u540d\u9f0e\u9f0e","\u4e94\u989c\u516d\u8272","\u65a9\u9489\u622a\u94c1","\u9ec4\u7cb1\u7f8e\u68a6","\u90d1\u91cd\u5176\u4e8b","\u610f\u5473\u6df1\u957f","\u54cd\u5f7b\u4e91\u9704","\u540d\u5217\u524d\u8305"],["\u4e00\u4e94\u4e00\u5341","\u5750\u4e95\u89c2\u5929","\u9752\u5c71\u7eff\u6c34","\u5929\u7f51\u6062\u6062","\u8bd7\u60c5\u753b\u610f","\u4e00\u5fc3\u4e00\u610f","\u5148\u5165\u4e3a\u4e3b","\u548c\u98ce\u7ec6\u96e8","\u5341\u6307\u8fde\u5fc3","\u4e94\u82b1\u516b\u95e8","\u708e\u9ec4\u5b50\u5b59","\u6210\u5bb6\u7acb\u4e1a","\u4e0d\u7531\u81ea\u4e3b","\u4e07\u6c34\u5343\u5c71","\u4e00\u8a00\u4e3a\u5b9a","\u83ba\u6b4c\u71d5\u821e","\u9876\u5929\u7acb\u5730","\u98ce\u5e73\u6d6a\u9759","\u5b89\u8eab\u7acb\u547d","\u4e50\u6781\u751f\u60b2","\u9762\u7ea2\u8033\u8d64","\u70ed\u706b\u671d\u5929","\u767e\u53d1\u767e\u4e2d","\u4e95\u4e95\u6709\u6761","\u4e00\u8def\u5e73\u5b89","\u9762\u76ee\u5168\u975e","\u4e09\u5fc3\u4e8c\u610f"],["\u6625\u6696\u82b1\u5f00","\u5341\u5b57\u8def\u53e3","\u5343\u519b\u4e07\u9a6c","\u767d\u624b\u8d77\u5bb6","\u5f20\u706f\u7ed3\u5f69","\u98ce\u548c\u65e5\u4e3d","\u4e07\u91cc\u957f\u57ce","\u4eba\u6765\u4eba\u5f80","\u81ea\u7531\u81ea\u5728","\u74dc\u7530\u674e\u4e0b","\u52a9\u4eba\u4e3a\u4e50","\u7ea2\u7537\u7eff\u5973","\u6625\u98ce\u5316\u96e8","\u9a6c\u5230\u6210\u529f","\u62d4\u82d7\u52a9\u957f","\u8d70\u9a6c\u89c2\u82b1"],["\u4e00\u5e06\u98ce\u987a","\u4e8c\u9f99\u817e\u98de","\u4e09\u7f8a\u5f00\u6cf0","\u56db\u5b63\u53d1\u8d22","\u4e94\u798f\u4e34\u95e8","\u516d\u516d\u5927\u987a","\u4e03\u661f\u9ad8\u7167","\u516b\u65b9\u6765\u8d22","\u4e5d\u4e5d\u540c\u5fc3","\u5341\u5168\u5341\u7f8e"],["\u5b89\u5c45\u4e50\u4e1a","\u5ff5\u5ff5\u4e0d\u5fd8","\u843d\u82b1\u6d41\u6c34","\u4e00\u5f80\u65e0\u524d","\u843d\u5730\u751f\u6839","\u5929\u7f57\u5730\u7f51","\u4e1c\u5c71\u518d\u8d77","\u4e00\u4e8b\u65e0\u6210","\u5c71\u6e05\u6c34\u79c0","\u8bed\u91cd\u5fc3\u957f","\u522b\u6709\u6d1e\u5929","\u6c34\u6df1\u706b\u70ed","\u9e1f\u8bed\u82b1\u9999","\u81ea\u4ee5\u4e3a\u662f"],["HELLO","WORLD","NICE","ONE","TWO"],["GOOD","OK","ASK"]]}}.call(this),cc._RF.pop()},{}]},{},["EventNames","Utils","wordConfig","GameLogic","RecordLogic","CharPanel","GameDialog","LevelClearDialog","WelcomdDialog"]);